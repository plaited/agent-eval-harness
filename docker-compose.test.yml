# Docker Compose for integration tests requiring Docker environment
#
# Integration tests live in integration_tests/ directories and require:
# - External API keys (Anthropic, Gemini)
# - Global CLI tools (claude, gemini)
#
# Usage:
#   Local:  ANTHROPIC_API_KEY=sk-... bun run test:integration
#   CI:     Uses secrets from GitHub Actions

services:
  acp-test:
    build:
      context: .
      dockerfile: Dockerfile.test
    environment:
      # Passes through from host environment (works in CI and local)
      - ANTHROPIC_API_KEY
      - GEMINI_API_KEY
    # Optional: mount src for live code debugging
    # volumes:
    #   - ./src:/app/src:ro
